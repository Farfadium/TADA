var $e=Object.defineProperty;var qe=(n,e,t)=>e in n?$e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pe=(n,e,t)=>qe(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function I(){}function Ie(n){return n()}function Ee(){return Object.create(null)}function q(n){n.forEach(Ie)}function ve(n){return typeof n=="function"}function X(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Ve(n){return Object.keys(n).length===0}function c(n,e){n.appendChild(e)}function M(n,e,t){n.insertBefore(e,t||null)}function P(n){n.parentNode&&n.parentNode.removeChild(n)}function Ge(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function p(n){return document.createElement(n)}function O(n){return document.createTextNode(n)}function D(){return O(" ")}function be(){return O("")}function L(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function Fe(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Ke(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function f(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Qe(n){return Array.from(n.childNodes)}function W(n,e){e=""+e,n.data!==e&&(n.data=e)}function V(n,e){n.value=e??""}function Xe(n,e,t,s){n.style.setProperty(e,t,"")}function K(n,e,t){n.classList.toggle(e,!!t)}function Ye(n,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:s})}let ce;function ae(n){ce=n}function We(){if(!ce)throw new Error("Function called outside component initialization");return ce}function fe(n){We().$$.on_mount.push(n)}function oe(){const n=We();return(e,t,{cancelable:s=!1}={})=>{const o=n.$$.callbacks[e];if(o){const l=Ye(e,t,{cancelable:s});return o.slice().forEach(i=>{i.call(n,l)}),!l.defaultPrevented}return!0}}function Ze(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const ne=[],me=[];let se=[];const je=[],xe=Promise.resolve();let _e=!1;function et(){_e||(_e=!0,xe.then(He))}function ge(n){se.push(n)}const he=new Set;let te=0;function He(){if(te!==0)return;const n=ce;do{try{for(;te<ne.length;){const e=ne[te];te++,ae(e),tt(e.$$)}}catch(e){throw ne.length=0,te=0,e}for(ae(null),ne.length=0,te=0;me.length;)me.pop()();for(let e=0;e<se.length;e+=1){const t=se[e];he.has(t)||(he.add(t),t())}se.length=0}while(ne.length);for(;je.length;)je.pop()();_e=!1,he.clear(),ae(n)}function tt(n){if(n.fragment!==null){n.update(),q(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ge)}}function nt(n){const e=[],t=[];se.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),se=e}const ue=new Set;let Q;function ke(){Q={r:0,c:[],p:Q}}function we(){Q.r||q(Q.c),Q=Q.p}function J(n,e){n&&n.i&&(ue.delete(n),n.i(e))}function $(n,e,t,s){if(n&&n.o){if(ue.has(n))return;ue.add(n),Q.c.push(()=>{ue.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}function le(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ue(n,e){n.d(1),e.delete(n.key)}function Je(n,e,t,s,o,l,i,r,a,u,d,h){let k=n.length,w=l.length,m=k;const v={};for(;m--;)v[n[m].key]=m;const E=[],j=new Map,y=new Map,S=[];for(m=w;m--;){const b=h(o,l,m),T=t(b);let A=i.get(T);A?S.push(()=>A.p(b,e)):(A=u(T,b),A.c()),j.set(T,E[m]=A),T in v&&y.set(T,Math.abs(m-v[T]))}const g=new Set,_=new Set;function C(b){J(b,1),b.m(r,d),i.set(b.key,b),d=b.first,w--}for(;k&&w;){const b=E[w-1],T=n[k-1],A=b.key,z=T.key;b===T?(d=b.first,k--,w--):j.has(z)?!i.has(A)||g.has(A)?C(b):_.has(z)?k--:y.get(A)>y.get(z)?(_.add(A),C(b)):(g.add(z),k--):(a(T,i),k--)}for(;k--;){const b=n[k];j.has(b.key)||a(b,i)}for(;w;)C(E[w-1]);return q(S),E}function ie(n){n&&n.c()}function Y(n,e,t){const{fragment:s,after_update:o}=n.$$;s&&s.m(e,t),ge(()=>{const l=n.$$.on_mount.map(Ie).filter(ve);n.$$.on_destroy?n.$$.on_destroy.push(...l):q(l),n.$$.on_mount=[]}),o.forEach(ge)}function Z(n,e){const t=n.$$;t.fragment!==null&&(nt(t.after_update),q(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function st(n,e){n.$$.dirty[0]===-1&&(ne.push(n),et(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function x(n,e,t,s,o,l,i=null,r=[-1]){const a=ce;ae(n);const u=n.$$={fragment:null,ctx:[],props:l,update:I,not_equal:o,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ee(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};i&&i(u.root);let d=!1;if(u.ctx=t?t(n,e.props||{},(h,k,...w)=>{const m=w.length?w[0]:k;return u.ctx&&o(u.ctx[h],u.ctx[h]=m)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](m),d&&st(n,h)),k}):[],u.update(),d=!0,q(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=Qe(e.target);u.fragment&&u.fragment.l(h),h.forEach(P)}else u.fragment&&u.fragment.c();e.intro&&J(n.$$.fragment),Y(n,e.target,e.anchor),He()}ae(a)}class ee{constructor(){pe(this,"$$");pe(this,"$$set")}$destroy(){Z(this,1),this.$destroy=I}$on(e,t){if(!ve(t))return I;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!Ve(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const lt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(lt);const U=window.location.hostname==="localhost"?"http://localhost:8080":window.location.origin;function Ce(n){let e,t;return{c(){e=p("p"),t=O(n[2]),f(e,"class","error svelte-1ug104r")},m(s,o){M(s,e,o),c(e,t)},p(s,o){o&4&&W(t,s[2])},d(s){s&&P(e)}}}function ot(n){let e,t,s,o,l,i,r,a,u,d,h,k,w,m=n[3]?"Connexion...":"Se connecter",v,E,j,y=n[2]&&Ce(n);return{c(){e=p("div"),t=p("div"),s=p("h1"),s.textContent="TADA",o=D(),l=p("p"),l.textContent="Own your life.",i=D(),r=p("form"),a=p("input"),u=D(),d=p("input"),h=D(),y&&y.c(),k=D(),w=p("button"),v=O(m),f(s,"class","svelte-1ug104r"),f(l,"class","subtitle svelte-1ug104r"),f(a,"type","text"),f(a,"placeholder","Username"),a.disabled=n[3],f(a,"class","svelte-1ug104r"),f(d,"type","password"),f(d,"placeholder","Password"),d.disabled=n[3],f(d,"class","svelte-1ug104r"),f(w,"type","submit"),w.disabled=n[3],f(w,"class","svelte-1ug104r"),f(t,"class","login-box svelte-1ug104r"),f(e,"class","login-container svelte-1ug104r")},m(S,g){M(S,e,g),c(e,t),c(t,s),c(t,o),c(t,l),c(t,i),c(t,r),c(r,a),V(a,n[0]),c(r,u),c(r,d),V(d,n[1]),c(r,h),y&&y.m(r,null),c(r,k),c(r,w),c(w,v),E||(j=[L(a,"input",n[5]),L(d,"input",n[6]),L(r,"submit",Fe(n[4]))],E=!0)},p(S,[g]){g&8&&(a.disabled=S[3]),g&1&&a.value!==S[0]&&V(a,S[0]),g&8&&(d.disabled=S[3]),g&2&&d.value!==S[1]&&V(d,S[1]),S[2]?y?y.p(S,g):(y=Ce(S),y.c(),y.m(r,k)):y&&(y.d(1),y=null),g&8&&m!==(m=S[3]?"Connexion...":"Se connecter")&&W(v,m),g&8&&(w.disabled=S[3])},i:I,o:I,d(S){S&&P(e),y&&y.d(),E=!1,q(j)}}}function it(n,e,t){const s=oe();let o="",l="",i="",r=!1;async function a(){t(2,i=""),t(3,r=!0);try{const h=await fetch(`${U}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:l})});if(!h.ok)throw new Error("Identifiants invalides");const k=await h.json();s("login",{token:k.access_token})}catch(h){t(2,i=h.message)}finally{t(3,r=!1)}}function u(){o=this.value,t(0,o)}function d(){l=this.value,t(1,l)}return[o,l,i,r,a,u,d]}class rt extends ee{constructor(e){super(),x(this,e,it,ot,X,{})}}function Te(n){let e,t,s,o,l,i,r,a,u,d,h,k=n[2]?"Envoi...":"Capturer",w,m,v,E;return{c(){e=p("div"),t=p("div"),s=p("h2"),s.textContent="Capture rapide",o=D(),l=p("textarea"),i=D(),r=p("div"),a=p("button"),u=O("Annuler"),d=D(),h=p("button"),w=O(k),f(s,"class","svelte-184c3s1"),f(l,"placeholder","√âcris ton id√©e, ta note, ton rappel..."),f(l,"rows","6"),l.autofocus=!0,f(l,"class","svelte-184c3s1"),f(a,"class","btn-secondary svelte-184c3s1"),a.disabled=n[2],f(h,"class","btn-primary svelte-184c3s1"),h.disabled=m=n[2]||!n[1].trim(),f(r,"class","modal-actions svelte-184c3s1"),f(t,"class","modal svelte-184c3s1"),f(e,"class","modal-backdrop svelte-184c3s1")},m(j,y){M(j,e,y),c(e,t),c(t,s),c(t,o),c(t,l),V(l,n[1]),c(t,i),c(t,r),c(r,a),c(a,u),c(r,d),c(r,h),c(h,w),l.focus(),v||(E=[L(l,"input",n[11]),L(a,"click",n[6]),L(h,"click",n[5]),L(t,"click",Ke(n[10])),L(e,"click",n[6])],v=!0)},p(j,y){y&2&&V(l,j[1]),y&4&&(a.disabled=j[2]),y&4&&k!==(k=j[2]?"Envoi...":"Capturer")&&W(w,k),y&6&&m!==(m=j[2]||!j[1].trim())&&(h.disabled=m)},d(j){j&&P(e),v=!1,q(E)}}}function at(n){let e,t,s,o,l,i,r,a,u=n[3]?"‚èπÔ∏è":"üé§",d,h,k,w,m,v,E,j,y,S=n[0]&&Te(n);return{c(){e=p("div"),t=p("h1"),t.textContent="TADA",s=D(),o=p("div"),l=p("button"),i=O("üìù"),r=D(),a=p("button"),d=O(u),k=D(),w=p("button"),m=O("üì∑"),v=D(),S&&S.c(),E=be(),f(t,"class","svelte-184c3s1"),f(l,"class","icon-btn svelte-184c3s1"),l.disabled=n[2],f(l,"title","Texte rapide"),f(a,"class",h="icon-btn "+(n[3]?"recording":"")+" svelte-184c3s1"),a.disabled=n[2],f(a,"title","Note vocale"),f(w,"class","icon-btn svelte-184c3s1"),w.disabled=n[2],f(w,"title","Photo"),f(o,"class","header-actions svelte-184c3s1"),f(e,"class","header svelte-184c3s1")},m(g,_){M(g,e,_),c(e,t),c(e,s),c(e,o),c(o,l),c(l,i),c(o,r),c(o,a),c(a,d),c(o,k),c(o,w),c(w,m),M(g,v,_),S&&S.m(g,_),M(g,E,_),j||(y=[L(l,"click",n[4]),L(a,"click",n[7]),L(w,"click",n[8])],j=!0)},p(g,[_]){_&4&&(l.disabled=g[2]),_&8&&u!==(u=g[3]?"‚èπÔ∏è":"üé§")&&W(d,u),_&8&&h!==(h="icon-btn "+(g[3]?"recording":"")+" svelte-184c3s1")&&f(a,"class",h),_&4&&(a.disabled=g[2]),_&4&&(w.disabled=g[2]),g[0]?S?S.p(g,_):(S=Te(g),S.c(),S.m(E.parentNode,E)):S&&(S.d(1),S=null)},i:I,o:I,d(g){g&&(P(e),P(v),P(E)),S&&S.d(g),j=!1,q(y)}}}function ct(n,e,t){let{token:s}=e;const o=oe();let l=!1,i="",r=!1,a=null,u=!1,d=[];async function h(){t(0,l=!0)}async function k(){if(i.trim()){t(2,r=!0);try{const _=await fetch(`${U}/capture`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({content:i})});if(!_.ok)throw _.status===401&&o("logout"),new Error("Erreur lors de la capture");t(1,i=""),t(0,l=!1),o("captured")}catch(_){alert(`Erreur: ${_.message}`)}finally{t(2,r=!1)}}}function w(){t(0,l=!1),t(1,i="")}async function m(){u?E():v()}async function v(){try{const _=await navigator.mediaDevices.getUserMedia({audio:!0});a=new MediaRecorder(_),d=[],a.ondataavailable=C=>{d.push(C.data)},a.onstop=async()=>{const C=new Blob(d,{type:"audio/webm"});await j(C),_.getTracks().forEach(b=>b.stop())},a.start(),t(3,u=!0)}catch(_){window.location.protocol!=="https:"&&window.location.hostname!=="localhost"?alert("Erreur: L'enregistrement audio n√©cessite HTTPS. Utilisez https://tada-yvan.tail014c2b.ts.net/"):alert(`Erreur d'acc√®s au microphone: ${_.message}`)}}function E(){!u||!a||(a.stop(),t(3,u=!1))}async function j(_){t(2,r=!0);try{const C=new FormData;C.append("file",_,"voice_capture.webm"),C.append("description","");const b=await fetch(`${U}/capture/file`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:C});if(!b.ok)throw b.status===401&&o("logout"),new Error("Erreur lors de l'envoi");o("captured")}catch(C){alert(`Erreur: ${C.message}`)}finally{t(2,r=!1)}}async function y(){const _=document.createElement("input");_.type="file",_.accept="image/*",_.capture="environment",_.onchange=async C=>{const b=C.target.files[0];if(b){t(2,r=!0);try{const T=new FormData;T.append("file",b),T.append("description","");const A=await fetch(`${U}/capture/file`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:T});if(!A.ok)throw A.status===401&&o("logout"),new Error("Erreur lors de l'envoi");o("captured")}catch(T){alert(`Erreur: ${T.message}`)}finally{t(2,r=!1)}}},_.click()}function S(_){Ze.call(this,n,_)}function g(){i=this.value,t(1,i)}return n.$$set=_=>{"token"in _&&t(9,s=_.token)},[l,i,r,u,h,k,w,m,y,s,S,g]}class ut extends ee{constructor(e){super(),x(this,e,ct,at,X,{token:9})}}function Se(n,e,t){const s=n.slice();return s[17]=e[t],s}function De(n,e){let t,s=e[17].content+"",o,l,i,r=e[17].timestamp+"",a,u;return{key:n,first:null,c(){t=p("div"),o=O(s),l=D(),i=p("div"),a=O(r),f(i,"class","message-time svelte-ytyik4"),f(t,"class",u="message "+e[17].role+" svelte-ytyik4"),this.first=t},m(d,h){M(d,t,h),c(t,o),c(t,l),c(t,i),c(i,a)},p(d,h){e=d,h&1&&s!==(s=e[17].content+"")&&W(o,s),h&1&&r!==(r=e[17].timestamp+"")&&W(a,r),h&1&&u!==(u="message "+e[17].role+" svelte-ytyik4")&&f(t,"class",u)},d(d){d&&P(t)}}}function Ae(n){let e;return{c(){e=p("div"),e.innerHTML='<span class="svelte-ytyik4">‚óè</span><span class="svelte-ytyik4">‚óè</span><span class="svelte-ytyik4">‚óè</span>',f(e,"class","message assistant typing svelte-ytyik4")},m(t,s){M(t,e,s)},d(t){t&&P(e)}}}function ft(n){let e,t,s=[],o=new Map,l,i,r,a,u,d,h,k,w,m,v=n[3]?"‚èπÔ∏è":"üé§",E,j,y,S,g=le(n[0]);const _=b=>b[17].id;for(let b=0;b<g.length;b+=1){let T=Se(n,g,b),A=_(T);o.set(A,s[b]=De(A,T))}let C=n[2]&&Ae();return{c(){e=p("div"),t=p("div");for(let b=0;b<s.length;b+=1)s[b].c();l=D(),C&&C.c(),i=D(),r=p("div"),a=p("div"),u=p("input"),d=D(),h=p("button"),k=O("üòä"),w=D(),m=p("button"),E=O(v),f(t,"class","messages svelte-ytyik4"),f(u,"type","text"),f(u,"placeholder","Message Moltbot..."),u.disabled=n[2],f(u,"class","svelte-ytyik4"),f(h,"class","emoji-btn svelte-ytyik4"),h.disabled=n[2],f(a,"class","input-wrapper svelte-ytyik4"),f(m,"class",j="voice-btn "+(n[3]?"recording":"")+" svelte-ytyik4"),m.disabled=n[2],f(r,"class","chat-input svelte-ytyik4"),f(e,"class","chat-container svelte-ytyik4")},m(b,T){M(b,e,T),c(e,t);for(let A=0;A<s.length;A+=1)s[A]&&s[A].m(t,null);c(t,l),C&&C.m(t,null),n[9](t),c(e,i),c(e,r),c(r,a),c(a,u),V(u,n[1]),c(a,d),c(a,h),c(h,k),c(r,w),c(r,m),c(m,E),y||(S=[L(u,"input",n[10]),L(u,"keypress",n[5]),L(m,"mousedown",n[6]),L(m,"mouseup",n[7]),L(m,"touchstart",n[6],{passive:!0}),L(m,"touchend",n[7],{passive:!0})],y=!0)},p(b,[T]){T&1&&(g=le(b[0]),s=Je(s,T,_,1,b,g,o,t,Ue,De,l,Se)),b[2]?C||(C=Ae(),C.c(),C.m(t,null)):C&&(C.d(1),C=null),T&4&&(u.disabled=b[2]),T&2&&u.value!==b[1]&&V(u,b[1]),T&4&&(h.disabled=b[2]),T&8&&v!==(v=b[3]?"‚èπÔ∏è":"üé§")&&W(E,v),T&8&&j!==(j="voice-btn "+(b[3]?"recording":"")+" svelte-ytyik4")&&f(m,"class",j),T&4&&(m.disabled=b[2])},i:I,o:I,d(b){b&&P(e);for(let T=0;T<s.length;T+=1)s[T].d();C&&C.d(),n[9](null),y=!1,q(S)}}}function dt(n,e,t){let{token:s}=e;const o=oe();let l=[],i="",r=!1,a=!1,u=null,d=[],h=null;fe(()=>{t(0,l=[{id:Date.now(),role:"assistant",content:"Salut ! Je suis Moltbot, ton assistant TADA. Comment puis-je t'aider ?",timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}])});function k(){setTimeout(()=>{h&&t(4,h.scrollTop=h.scrollHeight,h)},100)}async function w(g){if(!g.trim())return;const _={id:Date.now(),role:"user",content:g,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};t(0,l=[...l,_]),t(1,i=""),k(),t(2,r=!0);try{const C=await fetch(`${U}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({message:g})});if(!C.ok)throw C.status===401&&o("logout"),new Error("Erreur de communication avec Moltbot");const b=await C.json(),T={id:Date.now()+1,role:"assistant",content:b.response,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};t(0,l=[...l,T]),k()}catch(C){const b={id:Date.now()+1,role:"assistant",content:`Erreur: ${C.message}`,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};t(0,l=[...l,b]),k()}finally{t(2,r=!1)}}function m(g){g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),w(i))}async function v(){if(!a)try{const g=await navigator.mediaDevices.getUserMedia({audio:!0});u=new MediaRecorder(g),d=[],u.ondataavailable=_=>{d.push(_.data)},u.onstop=async()=>{const _=new Blob(d,{type:"audio/webm"});await j(_),g.getTracks().forEach(C=>C.stop())},u.start(),t(3,a=!0)}catch(g){alert(`Erreur d'acc√®s au microphone: ${g.message}`)}}function E(){!a||!u||(u.stop(),t(3,a=!1))}async function j(g){t(2,r=!0);try{const _=new FormData;_.append("file",g,"voice_message.webm"),_.append("description","Message vocal pour Moltbot");const C=await fetch(`${U}/capture/file`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:_});if(!C.ok)throw new Error("Erreur lors de l'envoi du message vocal");const b=await C.json(),T={id:Date.now(),role:"user",content:"üé§ Message vocal envoy√©",timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};t(0,l=[...l,T]);const A={id:Date.now()+1,role:"assistant",content:"Message vocal re√ßu et en cours de transcription. Je reviendrai vers toi d√®s que je l'aurai √©cout√© !",timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};t(0,l=[...l,A]),k()}catch(_){const C={id:Date.now()+1,role:"assistant",content:`Erreur: ${_.message}`,timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})};t(0,l=[...l,C]),k()}finally{t(2,r=!1)}}function y(g){me[g?"unshift":"push"](()=>{h=g,t(4,h)})}function S(){i=this.value,t(1,i)}return n.$$set=g=>{"token"in g&&t(8,s=g.token)},[l,i,r,a,h,m,v,E,s,y,S]}class pt extends ee{constructor(e){super(),x(this,e,dt,ft,X,{token:8})}}function Pe(n,e,t){const s=n.slice();return s[11]=e[t],s}function Me(n){let e,t,s,o,l=n[0].join(" / ")+"",i,r,a;return{c(){e=p("div"),t=p("button"),t.textContent="‚Üê Retour",s=D(),o=p("div"),i=O(l),f(t,"class","back-btn svelte-198o0wi"),f(o,"class","path svelte-198o0wi"),f(e,"class","breadcrumb svelte-198o0wi")},m(u,d){M(u,e,d),c(e,t),c(e,s),c(e,o),c(o,i),r||(a=L(t,"click",n[5]),r=!0)},p(u,d){d&1&&l!==(l=u[0].join(" / ")+"")&&W(i,l)},d(u){u&&P(e),r=!1,a()}}}function ht(n){let e,t=[],s=new Map,o=le(n[1]);const l=i=>i[11].path.join("/");for(let i=0;i<o.length;i+=1){let r=Pe(n,o,i),a=l(r);s.set(a,t[i]=Re(a,r))}return{c(){e=p("div");for(let i=0;i<t.length;i+=1)t[i].c();f(e,"class","file-list svelte-198o0wi")},m(i,r){M(i,e,r);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(i,r){r&18&&(o=le(i[1]),t=Je(t,r,l,1,i,o,s,e,Ue,Re,null,Pe))},d(i){i&&P(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function mt(n){let e;return{c(){e=p("div"),e.textContent="Aucun √©l√©ment",f(e,"class","empty svelte-198o0wi")},m(t,s){M(t,e,s)},p:I,d(t){t&&P(e)}}}function _t(n){let e,t;return{c(){e=p("div"),t=O(n[3]),f(e,"class","error svelte-198o0wi")},m(s,o){M(s,e,o),c(e,t)},p(s,o){o&8&&W(t,s[3])},d(s){s&&P(e)}}}function gt(n){let e;return{c(){e=p("div"),e.textContent="Chargement...",f(e,"class","loading svelte-198o0wi")},m(t,s){M(t,e,s)},p:I,d(t){t&&P(e)}}}function Oe(n){let e,t=n[11].count+"",s;return{c(){e=p("div"),s=O(t),f(e,"class","file-meta svelte-198o0wi")},m(o,l){M(o,e,l),c(e,s)},p(o,l){l&2&&t!==(t=o[11].count+"")&&W(s,t)},d(o){o&&P(e)}}}function Re(n,e){let t,s,o=e[11].icon+"",l,i,r,a,u,d=e[11].name+"",h,k,w,m=e[11].description+"",v,E,j,y,S,g,_=e[11].count!==void 0&&Oe(e);function C(){return e[7](e[11])}return{key:n,first:null,c(){t=p("div"),s=p("div"),l=O(o),r=D(),a=p("div"),u=p("div"),h=O(d),k=D(),w=p("div"),v=O(m),E=D(),_&&_.c(),j=D(),f(s,"class",i="file-icon "+e[11].type+"-icon svelte-198o0wi"),f(u,"class","file-name svelte-198o0wi"),f(w,"class","file-path svelte-198o0wi"),f(a,"class","file-info svelte-198o0wi"),f(t,"class",y="file-item "+e[11].type+" svelte-198o0wi"),this.first=t},m(b,T){M(b,t,T),c(t,s),c(s,l),c(t,r),c(t,a),c(a,u),c(u,h),c(a,k),c(a,w),c(w,v),c(t,E),_&&_.m(t,null),c(t,j),S||(g=L(t,"click",C),S=!0)},p(b,T){e=b,T&2&&o!==(o=e[11].icon+"")&&W(l,o),T&2&&i!==(i="file-icon "+e[11].type+"-icon svelte-198o0wi")&&f(s,"class",i),T&2&&d!==(d=e[11].name+"")&&W(h,d),T&2&&m!==(m=e[11].description+"")&&W(v,m),e[11].count!==void 0?_?_.p(e,T):(_=Oe(e),_.c(),_.m(t,j)):_&&(_.d(1),_=null),T&2&&y!==(y="file-item "+e[11].type+" svelte-198o0wi")&&f(t,"class",y)},d(b){b&&P(t),_&&_.d(),S=!1,g()}}}function vt(n){let e,t,s=n[0].length>0&&Me(n);function o(r,a){return r[2]?gt:r[3]?_t:r[1].length===0?mt:ht}let l=o(n),i=l(n);return{c(){e=p("div"),s&&s.c(),t=D(),i.c(),f(e,"class","explorer-container svelte-198o0wi")},m(r,a){M(r,e,a),s&&s.m(e,null),c(e,t),i.m(e,null)},p(r,[a]){r[0].length>0?s?s.p(r,a):(s=Me(r),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l===(l=o(r))&&i?i.p(r,a):(i.d(1),i=l(r),i&&(i.c(),i.m(e,null)))},i:I,o:I,d(r){r&&P(e),s&&s.d(),i.d()}}}function bt(n){return n.endsWith(".md")?"üìù":n.endsWith(".jpg")||n.endsWith(".png")||n.endsWith(".jpeg")?"üñºÔ∏è":n.endsWith(".mp3")||n.endsWith(".wav")||n.endsWith(".webm")?"üé§":(n.endsWith(".pdf"),"üìÑ")}function kt(n,e,t){let{token:s}=e;const o=oe();let l=[],i=[],r=!0,a="";fe(()=>{u()});async function u(){t(2,r=!0),t(3,a="");try{const m={Authorization:`Bearer ${s}`},[v,E,j]=await Promise.all([fetch(`${U}/dashboard`,{headers:m}),fetch(`${U}/projects`,{headers:m}),fetch(`${U}/pending`,{headers:m})]);if(!v.ok||!E.ok||!j.ok)throw new Error("Erreur de chargement");const y=await v.json(),S=await E.json(),g=await j.json();t(1,i=[{type:"folder",icon:"üìÇ",name:"NOW",description:"Projets actifs",count:y.now_projects,path:["NOW"]},{type:"folder",icon:"‚è≥",name:"PENDING",description:"En attente de tri",count:y.pending_items,path:["PENDING"]},{type:"folder",icon:"üì¶",name:"ARCHIVE",description:"Projets archiv√©s",count:0,path:["ARCHIVE"]}]),t(0,l=[])}catch(m){t(3,a=m.message),m.message.includes("401")&&o("logout")}finally{t(2,r=!1)}}async function d(m){t(2,r=!0),t(3,a="");try{const v={Authorization:`Bearer ${s}`};if(m[0]==="NOW"){const E=await fetch(`${U}/projects`,{headers:v});if(!E.ok)throw new Error("Erreur de chargement");const j=await E.json();t(1,i=j.map(y=>({type:"folder",icon:y.status||"‚ö™",name:y.name,description:y.has_index?"Projet avec index":"Projet",path:[...m,y.name]}))),t(0,l=m)}else if(m[0]==="PENDING"){const E=await fetch(`${U}/pending`,{headers:v});if(!E.ok)throw new Error("Erreur de chargement");const j=await E.json();t(1,i=j.slice(0,50).map(y=>({type:"file",icon:bt(y.name),name:y.name,description:y.is_old?`‚ö†Ô∏è ${y.age_days}j`:`${y.age_days}j`,path:[...m,y.name]}))),t(0,l=m)}else t(1,i=[]),t(0,l=m)}catch(v){t(3,a=v.message),v.message.includes("401")&&o("logout")}finally{t(2,r=!1)}}function h(m){m.type==="folder"&&d(m.path)}function k(){if(l.length!==0)if(l.length===1)u();else{const m=l.slice(0,-1);d(m)}}const w=m=>h(m);return n.$$set=m=>{"token"in m&&t(6,s=m.token)},[l,i,r,a,h,k,s,w]}class wt extends ee{constructor(e){super(),x(this,e,kt,vt,X,{token:6})}}function yt(n){let e;return{c(){e=O("Capturer")},m(t,s){M(t,e,s)},d(t){t&&P(e)}}}function Et(n){let e,t;return{c(){e=p("span"),t=O(`
        Capture en cours...`),f(e,"class","spinner svelte-s3gtjc")},m(s,o){M(s,e,o),M(s,t,o)},d(s){s&&(P(e),P(t))}}}function jt(n){let e;return{c(){e=O("üé§ Audio")},m(t,s){M(t,e,s)},d(t){t&&P(e)}}}function Ct(n){let e;return{c(){e=O("‚èπ Arr√™ter")},m(t,s){M(t,e,s)},d(t){t&&P(e)}}}function Tt(n){let e,t,s,o,l,i,r,a,u,d,h,k,w,m,v,E,j,y,S;function g(z,R){return z[1]?Et:yt}let _=g(n),C=_(n);function b(z,R){return z[2]?Ct:jt}let T=b(n),A=T(n);return{c(){e=p("div"),t=p("h2"),t.textContent="üí¨ Capture rapide",s=D(),o=p("form"),l=p("textarea"),i=D(),r=p("button"),C.c(),u=D(),d=p("div"),h=p("button"),A.c(),k=D(),w=p("label"),m=O(`üì∑ Photo
      `),v=p("input"),E=D(),j=p("div"),j.innerHTML='üí° Syntaxe: <code class="svelte-s3gtjc">@projet</code> <code class="svelte-s3gtjc">#tag</code> <code class="svelte-s3gtjc">[[lien]]</code>',f(t,"class","svelte-s3gtjc"),f(l,"placeholder",`Tape ton id√©e, t√¢che, note...
Utilise @projet pour lier √† un projet
Utilise #tag pour tagger
Utilise [[lien]] pour cr√©er des liens`),l.disabled=n[1],f(l,"rows","4"),f(l,"class","svelte-s3gtjc"),f(r,"type","submit"),r.disabled=a=n[1]||!n[0].trim(),f(r,"class","svelte-s3gtjc"),K(r,"loading",n[1]),f(h,"type","button"),f(h,"class","media-btn svelte-s3gtjc"),h.disabled=n[1],K(h,"recording",n[2]),f(v,"type","file"),f(v,"accept","image/*"),f(v,"capture","environment"),v.disabled=n[1],Xe(v,"display","none"),f(w,"class","media-btn svelte-s3gtjc"),K(w,"disabled",n[1]),f(d,"class","media-buttons svelte-s3gtjc"),f(j,"class","hint svelte-s3gtjc"),f(e,"class","capture-box svelte-s3gtjc")},m(z,R){M(z,e,R),c(e,t),c(e,s),c(e,o),c(o,l),V(l,n[0]),c(o,i),c(o,r),C.m(r,null),c(e,u),c(e,d),c(d,h),A.m(h,null),c(d,k),c(d,w),c(w,m),c(w,v),c(e,E),c(e,j),y||(S=[L(l,"input",n[8]),L(o,"submit",Fe(n[3])),L(h,"click",function(){ve(n[2]?n[5]:n[4])&&(n[2]?n[5]:n[4]).apply(this,arguments)}),L(v,"change",n[6])],y=!0)},p(z,[R]){n=z,R&2&&(l.disabled=n[1]),R&1&&V(l,n[0]),_!==(_=g(n))&&(C.d(1),C=_(n),C&&(C.c(),C.m(r,null))),R&3&&a!==(a=n[1]||!n[0].trim())&&(r.disabled=a),R&2&&K(r,"loading",n[1]),T!==(T=b(n))&&(A.d(1),A=T(n),A&&(A.c(),A.m(h,null))),R&2&&(h.disabled=n[1]),R&4&&K(h,"recording",n[2]),R&2&&(v.disabled=n[1]),R&2&&K(w,"disabled",n[1])},i:I,o:I,d(z){z&&P(e),C.d(),A.d(),y=!1,q(S)}}}function St(n,e,t){let{token:s}=e;const o=oe();let l="",i=!1,r=!1,a=null,u=[];async function d(){if(l.trim()){t(1,i=!0);try{const E=await fetch(`${U}/capture`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({content:l})});if(!E.ok)throw new Error("Erreur lors de la capture");const j=await E.json();await new Promise(y=>setTimeout(y,800)),t(1,i=!1),t(0,l=""),o("success",j)}catch(E){alert(E.message),t(1,i=!1)}}}async function h(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert(`‚ùå L'enregistrement audio n√©cessite HTTPS.

üí° Solutions:
1. Acc√©der via SSH tunnel:
   ssh -L 8081:localhost:8081 root@100.120.155.10
   puis ouvrir http://localhost:8081

2. Ou utiliser Tailscale HTTPS (demande √† Claude)`);return}try{const E=await navigator.mediaDevices.getUserMedia({audio:!0});a=new MediaRecorder(E),u=[],a.ondataavailable=j=>{u.push(j.data)},a.onstop=async()=>{const j=new Blob(u,{type:"audio/webm"});await m(j,"audio.webm","Enregistrement audio"),E.getTracks().forEach(y=>y.stop())},a.start(),t(2,r=!0)}catch(E){alert("Erreur: "+E.message)}}function k(){a&&r&&(a.stop(),t(2,r=!1))}async function w(E){const j=E.target.files[0];j&&await m(j,j.name,"Photo")}async function m(E,j,y){t(1,i=!0);const S=new FormData;S.append("file",E,j),S.append("description",y);try{const g=await fetch(`${U}/capture/file`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:S});if(!g.ok)throw new Error("Erreur lors de l'upload");const _=await g.json();await new Promise(C=>setTimeout(C,800)),t(1,i=!1),o("success",_)}catch(g){alert(g.message),t(1,i=!1)}}function v(){l=this.value,t(0,l)}return n.$$set=E=>{"token"in E&&t(7,s=E.token)},[l,i,r,d,h,k,w,s,v]}class Dt extends ee{constructor(e){super(),x(this,e,St,Tt,X,{token:7})}}function ze(n,e,t){const s=n.slice();return s[9]=e[t],s}function At(n){let e,t,s,o,l,i,r=n[1].now_projects+"",a,u,d,h,k,w,m,v,E,j=n[1].pending_items+"",y,S,g,_,C,b,T,A,z,R=n[1].pending_old>0&&Ne(n);b=new Dt({props:{token:n[0]}}),b.$on("success",n[6]);let H=n[2].length>0&&Le(n);return{c(){e=p("div"),t=p("div"),s=p("span"),s.textContent="üìä",o=D(),l=p("div"),i=p("div"),a=O(r),u=D(),d=p("div"),d.textContent="Projets actifs",h=D(),k=p("div"),w=p("span"),w.textContent="‚ö†Ô∏è",m=D(),v=p("div"),E=p("div"),y=O(j),S=D(),g=p("div"),_=O(`En attente
            `),R&&R.c(),C=D(),ie(b.$$.fragment),T=D(),H&&H.c(),A=be(),f(s,"class","icon svelte-1d7himl"),f(i,"class","stat-value svelte-1d7himl"),f(d,"class","stat-label svelte-1d7himl"),f(t,"class","stat svelte-1d7himl"),f(w,"class","icon svelte-1d7himl"),f(E,"class","stat-value svelte-1d7himl"),f(g,"class","stat-label svelte-1d7himl"),f(k,"class","stat svelte-1d7himl"),K(k,"warning",n[1].pending_old>0),f(e,"class","stats svelte-1d7himl")},m(N,B){M(N,e,B),c(e,t),c(t,s),c(t,o),c(t,l),c(l,i),c(i,a),c(l,u),c(l,d),c(e,h),c(e,k),c(k,w),c(k,m),c(k,v),c(v,E),c(E,y),c(v,S),c(v,g),c(g,_),R&&R.m(g,null),M(N,C,B),Y(b,N,B),M(N,T,B),H&&H.m(N,B),M(N,A,B),z=!0},p(N,B){(!z||B&2)&&r!==(r=N[1].now_projects+"")&&W(a,r),(!z||B&2)&&j!==(j=N[1].pending_items+"")&&W(y,j),N[1].pending_old>0?R?R.p(N,B):(R=Ne(N),R.c(),R.m(g,null)):R&&(R.d(1),R=null),(!z||B&2)&&K(k,"warning",N[1].pending_old>0);const re={};B&1&&(re.token=N[0]),b.$set(re),N[2].length>0?H?H.p(N,B):(H=Le(N),H.c(),H.m(A.parentNode,A)):H&&(H.d(1),H=null)},i(N){z||(J(b.$$.fragment,N),z=!0)},o(N){$(b.$$.fragment,N),z=!1},d(N){N&&(P(e),P(C),P(T),P(A)),R&&R.d(),Z(b,N),H&&H.d(N)}}}function Pt(n){let e,t;return{c(){e=p("p"),t=O(n[4]),f(e,"class","error svelte-1d7himl")},m(s,o){M(s,e,o),c(e,t)},p(s,o){o&16&&W(t,s[4])},i:I,o:I,d(s){s&&P(e)}}}function Mt(n){let e;return{c(){e=p("p"),e.textContent="Chargement...",f(e,"class","loading svelte-1d7himl")},m(t,s){M(t,e,s)},p:I,i:I,o:I,d(t){t&&P(e)}}}function Ne(n){let e,t=n[1].pending_old+"",s,o;return{c(){e=p("span"),s=O(t),o=O(" > 7j"),f(e,"class","badge svelte-1d7himl")},m(l,i){M(l,e,i),c(e,s),c(e,o)},p(l,i){i&2&&t!==(t=l[1].pending_old+"")&&W(s,t)},d(l){l&&P(e)}}}function Le(n){let e,t,s,o,l=le(n[2]),i=[];for(let r=0;r<l.length;r+=1)i[r]=Be(ze(n,l,r));return{c(){e=p("section"),t=p("h2"),t.textContent="Projets actifs",s=D(),o=p("div");for(let r=0;r<i.length;r+=1)i[r].c();f(t,"class","svelte-1d7himl"),f(o,"class","projects svelte-1d7himl"),f(e,"class","section svelte-1d7himl")},m(r,a){M(r,e,a),c(e,t),c(e,s),c(e,o);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,null)},p(r,a){if(a&4){l=le(r[2]);let u;for(u=0;u<l.length;u+=1){const d=ze(r,l,u);i[u]?i[u].p(d,a):(i[u]=Be(d),i[u].c(),i[u].m(o,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=l.length}},d(r){r&&P(e),Ge(i,r)}}}function Be(n){let e,t,s=(n[9].status||"‚ö™")+"",o,l,i,r=n[9].name+"",a,u;return{c(){e=p("div"),t=p("span"),o=O(s),l=D(),i=p("span"),a=O(r),u=D(),f(t,"class","status svelte-1d7himl"),f(i,"class","name svelte-1d7himl"),f(e,"class","project-card svelte-1d7himl")},m(d,h){M(d,e,h),c(e,t),c(t,o),c(e,l),c(e,i),c(i,a),c(e,u)},p(d,h){h&4&&s!==(s=(d[9].status||"‚ö™")+"")&&W(o,s),h&4&&r!==(r=d[9].name+"")&&W(a,r)},d(d){d&&P(e)}}}function Ot(n){let e,t,s,o,l,i,r,a,u,d,h;const k=[Mt,Pt,At],w=[];function m(v,E){return v[3]?0:v[4]?1:2}return r=m(n),a=w[r]=k[r](n),{c(){e=p("div"),t=p("header"),s=p("h1"),s.textContent="TADA",o=D(),l=p("button"),l.textContent="D√©connexion",i=D(),a.c(),f(s,"class","svelte-1d7himl"),f(l,"class","logout svelte-1d7himl"),f(t,"class","svelte-1d7himl"),f(e,"class","container svelte-1d7himl")},m(v,E){M(v,e,E),c(e,t),c(t,s),c(t,o),c(t,l),c(e,i),w[r].m(e,null),u=!0,d||(h=L(l,"click",n[7]),d=!0)},p(v,[E]){let j=r;r=m(v),r===j?w[r].p(v,E):(ke(),$(w[j],1,1,()=>{w[j]=null}),we(),a=w[r],a?a.p(v,E):(a=w[r]=k[r](v),a.c()),J(a,1),a.m(e,null))},i(v){u||(J(a),u=!0)},o(v){$(a),u=!1},d(v){v&&P(e),w[r].d(),d=!1,h()}}}function Rt(n,e,t){let{token:s}=e;const o=oe();let l={now_projects:0,pending_items:0,pending_old:0,last_sync:null},i=[],r=!0,a="";async function u(){t(3,r=!0),t(4,a="");try{const k={Authorization:`Bearer ${s}`},[w,m]=await Promise.all([fetch(`${U}/dashboard`,{headers:k}),fetch(`${U}/projects`,{headers:k})]);if(!w.ok||!m.ok)throw new Error("Erreur de chargement");t(1,l=await w.json()),t(2,i=await m.json())}catch(k){t(4,a=k.message),k.message.includes("401")&&o("logout")}finally{t(3,r=!1)}}function d(){u()}fe(()=>{u()});const h=()=>o("logout");return n.$$set=k=>{"token"in k&&t(0,s=k.token)},[s,l,i,r,a,o,d,h]}class zt extends ee{constructor(e){super(),x(this,e,Rt,Ot,X,{token:0})}}function Nt(n){let e,t;return e=new rt({}),e.$on("login",n[3]),{c(){ie(e.$$.fragment)},m(s,o){Y(e,s,o),t=!0},p:I,i(s){t||(J(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Lt(n){let e,t,s,o,l,i,r,a,u,d,h,k,w,m,v,E,j,y,S,g,_,C,b,T,A,z,R,H;t=new ut({props:{token:n[0]}}),t.$on("logout",n[4]),t.$on("captured",n[5]);const N=[Ft,It,Bt],B=[];function re(F,G){return F[2]==="chat"?0:F[2]==="tada"?1:F[2]==="dashboard"?2:-1}return~(l=re(n))&&(i=B[l]=N[l](n)),{c(){e=p("div"),ie(t.$$.fragment),s=D(),o=p("div"),i&&i.c(),r=D(),a=p("div"),u=p("button"),d=p("div"),d.textContent="üí¨",h=D(),k=p("div"),k.textContent="Chat",m=D(),v=p("button"),E=p("div"),E.textContent="üìÅ",j=D(),y=p("div"),y.textContent="TADA",g=D(),_=p("button"),C=p("div"),C.textContent="üìä",b=D(),T=p("div"),T.textContent="Dashboard",f(o,"class","content svelte-z6efue"),f(d,"class","nav-icon svelte-z6efue"),f(k,"class","nav-label svelte-z6efue"),f(u,"class",w="nav-item "+(n[2]==="chat"?"active":"")+" svelte-z6efue"),f(E,"class","nav-icon svelte-z6efue"),f(y,"class","nav-label svelte-z6efue"),f(v,"class",S="nav-item "+(n[2]==="tada"?"active":"")+" svelte-z6efue"),f(C,"class","nav-icon svelte-z6efue"),f(T,"class","nav-label svelte-z6efue"),f(_,"class",A="nav-item "+(n[2]==="dashboard"?"active":"")+" svelte-z6efue"),f(a,"class","bottom-nav svelte-z6efue"),f(e,"class","app svelte-z6efue")},m(F,G){M(F,e,G),Y(t,e,null),c(e,s),c(e,o),~l&&B[l].m(o,null),c(e,r),c(e,a),c(a,u),c(u,d),c(u,h),c(u,k),c(a,m),c(a,v),c(v,E),c(v,j),c(v,y),c(a,g),c(a,_),c(_,C),c(_,b),c(_,T),z=!0,R||(H=[L(u,"click",n[6]),L(v,"click",n[7]),L(_,"click",n[8])],R=!0)},p(F,G){const ye={};G&1&&(ye.token=F[0]),t.$set(ye);let de=l;l=re(F),l===de?~l&&B[l].p(F,G):(i&&(ke(),$(B[de],1,1,()=>{B[de]=null}),we()),~l?(i=B[l],i?i.p(F,G):(i=B[l]=N[l](F),i.c()),J(i,1),i.m(o,null)):i=null),(!z||G&4&&w!==(w="nav-item "+(F[2]==="chat"?"active":"")+" svelte-z6efue"))&&f(u,"class",w),(!z||G&4&&S!==(S="nav-item "+(F[2]==="tada"?"active":"")+" svelte-z6efue"))&&f(v,"class",S),(!z||G&4&&A!==(A="nav-item "+(F[2]==="dashboard"?"active":"")+" svelte-z6efue"))&&f(_,"class",A)},i(F){z||(J(t.$$.fragment,F),J(i),z=!0)},o(F){$(t.$$.fragment,F),$(i),z=!1},d(F){F&&P(e),Z(t),~l&&B[l].d(),R=!1,q(H)}}}function Bt(n){let e,t;return e=new zt({props:{token:n[0]}}),e.$on("logout",n[4]),{c(){ie(e.$$.fragment)},m(s,o){Y(e,s,o),t=!0},p(s,o){const l={};o&1&&(l.token=s[0]),e.$set(l)},i(s){t||(J(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function It(n){let e,t;return e=new wt({props:{token:n[0]}}),e.$on("logout",n[4]),{c(){ie(e.$$.fragment)},m(s,o){Y(e,s,o),t=!0},p(s,o){const l={};o&1&&(l.token=s[0]),e.$set(l)},i(s){t||(J(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ft(n){let e,t;return e=new pt({props:{token:n[0]}}),e.$on("logout",n[4]),{c(){ie(e.$$.fragment)},m(s,o){Y(e,s,o),t=!0},p(s,o){const l={};o&1&&(l.token=s[0]),e.$set(l)},i(s){t||(J(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Wt(n){let e,t,s,o;const l=[Lt,Nt],i=[];function r(a,u){return a[1]?0:1}return e=r(n),t=i[e]=l[e](n),{c(){t.c(),s=be()},m(a,u){i[e].m(a,u),M(a,s,u),o=!0},p(a,[u]){let d=e;e=r(a),e===d?i[e].p(a,u):(ke(),$(i[d],1,1,()=>{i[d]=null}),we(),t=i[e],t?t.p(a,u):(t=i[e]=l[e](a),t.c()),J(t,1),t.m(s.parentNode,s))},i(a){o||(J(t),o=!0)},o(a){$(t),o=!1},d(a){a&&P(s),i[e].d(a)}}}function Ht(n,e,t){let s=localStorage.getItem("tada_token"),o=!!s,l="chat";function i(k){t(0,s=k.detail.token),localStorage.setItem("tada_token",s),t(1,o=!0)}function r(){t(0,s=null),localStorage.removeItem("tada_token"),t(1,o=!1)}function a(){l==="tada"?(t(2,l=""),setTimeout(()=>t(2,l="tada"),0)):l==="dashboard"&&(t(2,l=""),setTimeout(()=>t(2,l="dashboard"),0))}return fe(()=>{s&&fetch(`${U}/dashboard`,{headers:{Authorization:`Bearer ${s}`}}).then(k=>{k.status===401&&r()}).catch(()=>r())}),[s,o,l,i,r,a,()=>t(2,l="chat"),()=>t(2,l="tada"),()=>t(2,l="dashboard")]}class Ut extends ee{constructor(e){super(),x(this,e,Ht,Wt,X,{})}}new Ut({target:document.getElementById("app")});
